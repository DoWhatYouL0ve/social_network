"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[54],{1054:function(e,s,o){o.r(s),o.d(s,{default:function(){return K}});var t=o(8683),n=o(5671),r=o(3144),i=o(136),a=o(3668),l=o(2791),c=o(885),u={avaDescriptionWrapper:"ProfileInfo_avaDescriptionWrapper__WhcBl",changeAva:"ProfileInfo_changeAva__Nm7-r",fullName:"ProfileInfo_fullName__App6w",profileInfoBackground:"ProfileInfo_profileInfoBackground__90ZtQ",profileStatusWrapper:"ProfileInfo_profileStatusWrapper__Cwp3P",accountInfo:"ProfileInfo_accountInfo__Cy3Wy",contactsInfoWrapper:"ProfileInfo_contactsInfoWrapper__N-TTG",lookingForAJob:"ProfileInfo_lookingForAJob__6GEd5",description:"ProfileInfo_description__4ElWF"},p=o(8103),d=o(411),f=o(6547),h=o(184),m=function(e){var s=(0,l.useState)(!1),o=(0,c.Z)(s,2),t=o[0],n=o[1],r=(0,l.useState)(e.status),i=(0,c.Z)(r,2),a=i[0],p=i[1];(0,l.useEffect)((function(){p(e.status)}),[e.status]);return(0,h.jsxs)("div",{className:u.profileStatusWrapper,children:[!t&&(0,h.jsx)("div",{children:(0,h.jsx)("span",{onDoubleClick:function(){n(!0)},children:e.status||"no status"})}),t&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{type:"text",value:a,onBlur:function(){n(!1),e.updateUserStatus(a)},autoFocus:!0,onChange:function(e){p(e.currentTarget.value)}})})]})},x=o(2134),j={accountInfoForm:"form_accountInfoForm__YYMjE"},v=o(5705),g=o(132),_=o(1014),b=o(2177),k=function(e){var s=(0,b.I0)(),o=(0,v.TA)({initialValues:{user_name:e.profile.fullName,skills:e.profile.lookingForAJobDescription||"",lookingForAJob:!1,contacts:e.profile.contacts},validationSchema:g.Ry({user_name:g.Z_().required("* Name field is required")}),onSubmit:function(o){console.log("values",o),s((0,_.QK)({userId:e.profile.userId,fullName:o.user_name,lookingForAJob:o.lookingForAJob,lookingForAJobDescription:o.skills,contacts:o.contacts,photos:e.profile.photos,AboutMe:"some information"})),e.deactivateEditMode()}});return(0,h.jsxs)("form",{className:j.accountInfoForm,onSubmit:o.handleSubmit,children:[(0,h.jsx)("div",{className:j.fullName,children:"Full name:"}),(0,h.jsx)("label",{htmlFor:"user_name"}),(0,h.jsx)("input",{id:"user_name",name:"user_name",type:"text",autoComplete:"off",onChange:o.handleChange,value:o.values.user_name}),(0,h.jsx)("div",{className:"expandable ".concat(o.touched.user_name&&o.errors.user_name?"show":""),children:o.errors.user_name}),(0,h.jsxs)("div",{className:j.lookingForAJob,children:[(0,h.jsx)("b",{children:"Looking for a job:"})," ",(0,h.jsx)("input",{id:"lookingForAJob",name:"lookingForAJob",type:"checkbox",onChange:o.handleChange})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills:"})," ",(0,h.jsx)("textarea",{id:"skills",name:"skills",value:o.values.skills,onChange:o.handleChange})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contacts:"})," ",Object.keys(e.profile.contacts).map((function(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("b",{children:[e,":"," ",(0,h.jsx)("input",{type:"text",id:"contact."+e,name:"contacts."+e,onChange:o.handleChange})]})},e)}))]}),(0,h.jsx)("button",{type:"submit",children:"Save"})]})},P=function(e){var s=(0,l.useState)(!1),o=(0,c.Z)(s,2),t=o[0],n=o[1];if(!e.profile)return(0,h.jsx)(f.x,{});return(0,h.jsxs)("div",{className:u.profileWrapper,children:[(0,h.jsx)("div",{className:u.profileInfoBackground,children:(0,h.jsx)("img",{src:p,alt:""})}),(0,h.jsxs)("div",{className:u.avaDescriptionWrapper,children:[(0,h.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:d,alt:"no picture"}),e.isOwner&&(0,h.jsxs)("div",{style:{height:"0"},children:[(0,h.jsx)("label",{htmlFor:"changeAvaInput",className:u.changeAva,children:(0,h.jsx)(x.rJU,{})}),(0,h.jsx)("input",{id:"changeAvaInput",type:"file",onChange:function(s){null!=s&&s.target.files&&e.savePhoto(s.target.files[0])}})]}),(0,h.jsx)(m,{status:e.status,updateUserStatus:e.updateUserStatus}),t?(0,h.jsx)(k,{deactivateEditMode:function(){return n(!1)},profile:e.profile}):(0,h.jsx)(I,{profile:e.profile,owner:e.isOwner,activateEditMode:function(){n(!0)}})]})]})},N=function(e){var s=e.contactTitle,o=e.contactValue;return(0,h.jsxs)("div",{className:u.contactsInfoWrapper,children:[(0,h.jsx)("b",{children:s}),": ",o]})},I=function(e){return(0,h.jsxs)("div",{className:u.accountInfo,children:[(0,h.jsx)("div",{className:u.fullName,children:e.profile.fullName}),(0,h.jsxs)("div",{className:u.lookingForAJob,children:[(0,h.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,h.jsxs)("div",{className:u.description,children:[(0,h.jsx)("b",{children:"My professional skills:"})," ",e.profile.lookingForAJobDescription]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contacts:"})," ",Object.keys(e.profile.contacts).map((function(s){var o;return(0,h.jsx)(N,{contactTitle:s,contactValue:null===(o=e.profile)||void 0===o?void 0:o.contacts[s]},s)}))]}),e.owner&&(0,h.jsx)("button",{onClick:e.activateEditMode,children:"Edit info"})]})},y="MyPosts_myPostWrapper__SKDbq",C="MyPosts_posts__hrhUY",A="Post_post__fVFb0",F="Post_likes__XCNpv",S="Post_profileMessage__gKRhz",w=function(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:A,children:[(0,h.jsx)("div",{children:(0,h.jsx)("img",{src:d,alt:""})}),(0,h.jsx)("div",{className:S,children:e.message}),(0,h.jsxs)("div",{className:F,children:["Likes: ",e.likeCount]})]})})},J=o(6139),M=o(704),W=o(5298),U=o(1117),Z=(0,W.D)(10),E=(0,M.Z)({form:"addMyPostForm"})((function(e){return(0,h.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.jsx)("div",{children:(0,h.jsx)(J.Z,{component:U.g,name:"newPostText",placeholder:"Enter your message",cols:40,rows:5,validate:[W.C,Z]})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"Add post"})})]})})),D=l.memo((function(e){var s=e.posts.map((function(e){return(0,h.jsx)(w,{id:e.id,message:e.message,likeCount:e.likeCount},e.id)}));return(0,h.jsxs)("div",{className:y,children:[(0,h.jsx)("h3",{children:"My posts"}),(0,h.jsx)("div",{children:(0,h.jsx)(E,{onSubmit:function(s){e.addPost(s.newPostText)}})}),(0,h.jsx)("div",{className:C,children:s})]})})),T=(0,b.$j)((function(e){return{posts:e.profilePage.posts,profile:e.profilePage.profile,status:e.profilePage.status}}),(function(e){return{addPost:function(s){e((0,_.Pi)(s))}}}))(D),O="Profile_profileWrapper__L+xkM",q=function(e){return(0,h.jsxs)("div",{className:O,children:[(0,h.jsx)(P,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,savePhoto:e.savePhoto}),(0,h.jsx)(T,{})]})},B=o(9723),L=o(7781),V=function(e){(0,i.Z)(o,e);var s=(0,a.Z)(o);function o(){return(0,n.Z)(this,o),s.apply(this,arguments)}return(0,r.Z)(o,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.id)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"render",value:function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(q,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto}))})}}]),o}(l.Component),K=(0,L.qC)((0,b.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,id:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:_.et,getUserStatus:_.Tq,updateUserStatus:_.OL,savePhoto:_.Ju}),B.EN)(V)},411:function(e,s,o){e.exports=o.p+"static/media/ava.9a8a2bcd8fd92bb61fe2.jpg"},8103:function(e,s,o){e.exports=o.p+"static/media/beach.e01c9e22ee81c5ce7924.jpg"}}]);
//# sourceMappingURL=54.3ab85fe4.chunk.js.map